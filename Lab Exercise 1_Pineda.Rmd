---
title: "Lab Exercise 1_Pineda"
output: pdf_document
date: "2024-02-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Scraping for Handbags

```{r}

library(tidyverse)
library(dplyr)
library(rvest)
library(httr)
library(polite)
library(ggplot2)

Handbags_Products <- data.frame()

HandbagLink1 = "https://www.amazon.co.uk/s?k=handbags&crid=TXLH0DAZWXCO&qid=1708264736&sprefix=handbags%2Caps%2C399&ref=sr_pg_1"

Session1 <- bow(HandbagLink1, user_agent = "Educational Purposes")

ScrapeNodes <- function(selector){
scrape(Session1) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}

ScrapedCategory <- "Handbags"

ScrapedName <- ScrapeNodes("span.a-size-base-plus.a-color-base.a-text-normal")
ScrapedName <- ScrapedName[1:45]

ScrapedPrice <- ScrapeNodes("span.a-offscreen")
ScrapedPrice <- ScrapedPrice[1:45]

ScrapedRatings <- ScrapeNodes("span.a-icon-alt")
ScrapedRatings <- ScrapedRatings[1:45]

ScrapedReviews <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedReviews <- ScrapedReviews[1:45]

Handbags_Products <- rbind(Handbags_Products, data.frame(Category = ScrapedCategory,Name = ScrapedName,
                    Price = ScrapedPrice, Ratings = ScrapedRatings,Num_of_reviews = ScrapedReviews))

##############

HandbagLink2 = "https://www.amazon.co.uk/s?k=handbags&page=2&crid=TXLH0DAZWXCO&qid=1708264709&sprefix=handbags%2Caps%2C399&ref=sr_pg_1"

Session2 <- bow(HandbagLink2, user_agent = "Educational Purposes")

ScrapedCategory <- "Handbags" 

ScrapedName2 <- ScrapeNodes("span.a-size-base-plus.a-color-base.a-text-normal")
ScrapedName2 <- ScrapedName2[1:45]

ScrapedPrice2 <- ScrapeNodes("span.a-offscreen")
ScrapedPrice2 <- ScrapedPrice2[1:45]

ScrapedRatings2 <- ScrapeNodes("div.a-row.a-size-small")
ScrapedRatings2 <- ScrapedRatings2[1:45]

ScrapedReviews2 <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedReviews2 <- ScrapedReviews2[1:45]

Handbags_Products <- rbind(Handbags_Products, data.frame(Category = ScrapedCategory,Name = ScrapedName,
                    Price = ScrapedPrice, Ratings = ScrapedRatings,Num_of_reviews = ScrapedReviews))

###############

HandbagLink3 = "https://www.amazon.co.uk/s?k=handbags&page=3&crid=TXLH0DAZWXCO&qid=1708513545&sprefix=handbags%2Caps%2C399&ref=sr_pg_2"

Session3 <- bow(HandbagLink3, user_agent = "Educational Purpose")

ScrapedCategory <- "Handbags"

ScrapedName3 <- ScrapeNodes("span.a-size-base-plus.a-color-base.a-text-normal")
ScrapedName3 <- ScrapedName3[1:45]

ScrapedPrice3 <- ScrapeNodes("span.a-offscreen")
ScrapedPrice3 <- ScrapedPrice3[1:45]

ScrapedRatings3 <- ScrapeNodes("div.a-section.a-spacing-none.a-spacing-top-micro")
ScrapedRatings3 <- ScrapedRatings3[1:45]

ScrapedReviews3 <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedReviews3 <- ScrapedReviews3[1:45]

Handbags_Products <- rbind(Handbags_Products, data.frame(Category = ScrapedCategory, Name = ScrapedName,
                Price = ScrapedPrice, Ratings = ScrapedRatings,                     Num_of_reviews = ScrapedReviews))

Handbags_Products <- Handbags_Products[1:100,]

#View(Handbag_Products)

```

Scraping for Suitcase

```{r}

library(tidyverse)
library(dplyr)
library(rvest)
library(httr)
library(polite)
library(ggplot2)

Suitcase_Products <- data.frame()

SuitcaseLink1 = "https://www.amazon.co.uk/s?k=suitcase&crid=1DXWJU6CW56YD&sprefix=suitcase%2Caps%2C438&ref=nb_sb_noss_1"

Session4 <- bow(SuitcaseLink1, user_agent = "Educational Purpose")

ScrapeNodes <- function(selector){
scrape(Session4) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}

ScrapedCategory <- "Suitcase"

ScrapedSuitcaseName <-   ScrapeNodes("span.a-size-base-plus.a-color-base.a-text-normal")
ScrapedSuitcaseName <- ScrapedSuitcaseName[1:45]

ScrapedSuitcasePrice <- ScrapeNodes("span.a-offscreen")
ScrapedSuitcasePrice <- ScrapedSuitcasePrice[1:45]

ScrapedSuitcaseRatings <- ScrapeNodes("span.a-icon-alt")
ScrapedSuitcaseRatings <- ScrapedSuitcaseRatings[1:45]

ScrapedSuitcaseReviews <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedSuitcaseReviews <- ScrapedSuitcaseReviews[1:45]

Suitcase_Products <- rbind(Suitcase_Products, data.frame(Category = ScrapedCategory,Name = ScrapedSuitcaseName,
                    Price = ScrapedSuitcasePrice,
                    Ratings = ScrapedSuitcaseRatings,
                    Num_of_reviews = ScrapedSuitcaseReviews))
                    
###############

SuitcaseLink2 = "https://www.amazon.co.uk/s?k=suitcase&page=2&crid=1DXWJU6CW56YD&qid=1708515068&sprefix=suitcase%2Caps%2C438&ref=sr_pg_2"

Session5 <- bow(SuitcaseLink2, user_agent = "Educational Purpose")

ScrapedCategory <- "Suitcase"

ScrapedSuitcaseName2 <- ScrapeNodes("span.a-size-base-plus.a-color-base.a-text-normal")
ScrapedSuitcaseName2 <- ScrapedSuitcaseName2[1:45]

ScrapedSuitcasePrice2 <- ScrapeNodes("span.a-price-whole")
ScrapedSuitcasePrice2 <- ScrapedSuitcasePrice2[1:45]

ScrapedSuitcaseRatings2 <- ScrapeNodes("div.a-row.a-size-small")
ScrapedSuuitcaseRatings2 <- ScrapedSuitcaseRatings2[1:45]

ScrapedSuitcaseReviews2 <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedSuitcaseReviews2 <- ScrapedSuitcaseReviews2[1:45]

Suitcase_Products <- rbind(Suitcase_Products, data.frame(Category = ScrapedCategory,Name = ScrapedSuitcaseName,
                    Price = ScrapedSuitcasePrice,
                    Ratings = ScrapedSuitcaseRatings,
                    Num_of_reviews = ScrapedSuitcaseReviews))

###############

SuitcaseLink3 = "https://www.amazon.co.uk/s?k=suitcase&page=3&crid=1DXWJU6CW56YD&qid=1708515925&sprefix=suitcase%2Caps%2C438&ref=sr_pg_3"

Session6 <- bow(SuitcaseLink3, user_agent = "Educational Purpose")

ScrapedCategory <- "Suitcase"

ScrapedSuitcaseName3 <- ScrapeNodes("div.a-section.a-spacing-small puis-padding-left-small.puis-padding-right-small")
ScrapedSuitcaseName3 <- ScrapedSuitcaseName3[1:45]

ScrapedSuitcasePrice3 <- ScrapeNodes("span.a-price-whole")
ScrapedSuitcasePrice3 <- ScrapedSuitcasePrice3[1:45]

ScrapedSuitcaseRatings3 <- ScrapeNodes("div.a-row a-size-small")
ScrapedSuitcaseRatings3 <- ScrapedSuitcaseRatings3[1:45]

ScrapedSuitcaseReviews3 <- ScrapeNodes("span.a-size-base.s-underline-text")
ScrapedSuitcaseReviews3 <- ScrapedSuitcaseReviews3[1:45]

Suitcase_Products <- rbind(Suitcase_Products, data.frame(Category = ScrapedCategory,Name = ScrapedSuitcaseName,
                    Price = ScrapedSuitcasePrice, Ratings = ScrapedSuitcaseRatings,Num_of_reviews = ScrapedSuitcaseReviews))

Suitcase_Products <- Suitcase_Products[1:100,]

#View(Suitcase_Products)
```

Merging Two Products

```{r}
Scraped_Products <- rbind(Handbags_Products, Suitcase_Products)
#View(Scraped_Products)
```

10 Products

Product1

```{r}
library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

Product1 = data.frame()
ScrapedCategory <- "Handbags"

#####

Link = "https://www.amazon.co.uk/Drop-Womens-Addison-Handle-Chocolate/product-reviews/B09GW13FN4/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&reviewerType=all_reviews" 

SessionProd1 <- bow(Link, user_agent = "Educational Purpose")
  
ScrapeNodes <- function(selector){
scrape(SessionProd1) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}
          
      ScrapedName <- ScrapeNodes("h1.a-size-large.a-spacing-none.a-color-secondary")
      
      ScrapedReviewer <- ScrapeNodes("span.a-profile-name")
      ScrapedReviewer <- ScrapedReviewer[1:10]

      
      ScrapedReview <- ScrapeNodes("div.a-expander-content.reviewText.review-text-content.a-expander-partial-collapse-content")
      ScrapedReview <- ScrapedReview[1:10]

      
      ScrapedDate <- ScrapeNodes("span.a-size-base.a-color-secondary.review-date")
      ScrapedDate <- ScrapedDate[1:10]

      
      ScrapedRating <- ScrapeNodes("div.a-row")
      ScrapedRating <- ScrapedRating[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory,Name = ScrapedName,
                          Reviewer = ScrapedReviewer,
                          Review = ScrapedReview,
                          Date = ScrapedDate,
                         Ratings = ScrapedRating))

#####
      
Link2 = "https://www.amazon.co.uk/Drop-Womens-Addison-Handle-Chocolate/product-reviews/B09GW13FN4/ref=cm_cr_getr_d_paging_btm_next_2?ie=UTF8&reviewerType=all_reviews&pageNumber=2"

SessionProd2 <- bow(Link2, user_agent = "Educational Purpose")  


      ScrapedReviewer2 <- ScrapeNodes("span.a-profile-name")
      scrapedReviewer2 <- ScrapedReviewer2[1:10]

      
      ScrapedReview2 <- ScrapeNodes("span.a-size-base.review-text.review-text-content")
      ScrapedReview2 <- ScrapedReview2[1:10]

      
      ScrapedDate2 <- ScrapeNodes("span.a-size-base.a-color-secondary.review-date")
      ScrapedDate2 <- ScrapedDate2[1:10]

      
      ScrapedRating2 <- ScrapeNodes("div.a-row.a-spacing-none")
      ScrapedRating2 <- ScrapedRating2[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory, 
                          Name = ScrapedName,
                          Reviewer = ScrapedReviewer2,
                          Review = ScrapedReview2,
                          Date = ScrapedDate2,
                          Ratings = ScrapedRating2))
      
#####
      
Link3 = "https://www.amazon.co.uk/Drop-Womens-Addison-Handle-Chocolate/product-reviews/B09GW13FN4/ref=cm_cr_getr_d_paging_btm_next_3?ie=UTF8&reviewerType=all_reviews&pageNumber=3"

SessionProd3 <- bow(Link3, user_agent = "Educational Purpose")  

 
      ScrapedReviewer3 <- ScrapeNodes("span.a-profile-name")
      scrapedReviewer3 <- ScrapedReviewer3[1:10]

      
      ScrapedReview3 <- ScrapeNodes("span.a-size-base.review-text.review-text-content")
      ScrapedReview3 <- ScrapedReview3[1:10]

      
      ScrapedDate3 <- ScrapeNodes("span.a-size-base.a-color-secondary.review-date")
      ScrapedDate3 <- ScrapedDate3[1:10]

      
      ScrapedRating3 <- ScrapeNodes("div.a-row.a-spacing-none")
      ScrapedRating3 <- ScrapedRating3[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory,
                          Name = ScrapedName,
                          Reviewer = scrapedReviewer3,
                          Review = ScrapedReview3,
                          Date = ScrapedDate3,
                          Ratings = ScrapedRating3))

#View(Product1)
```

Product2
```{r}
library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

Product2 = data.frame()
ScrapedCategory <- "Handbags"

#####

Link = "https://www.amazon.co.uk/Miss-Lulu-Leather-Stylish-Shoulder/product-reviews/B07DD8GGNX/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&reviewerType=all_reviews" 

SessionProd1 <- bow(Link, user_agent = "Educational Purpose")
  
ScrapeNodes <- function(selector){
scrape(SessionProd1) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}
          
      ScrapedName <- ScrapeNodes("span.a-size-large.product-title-word-break")
      
      ScrapedReviewer <- ScrapeNodes("a-profile-name")
      ScrapedReviewer <- ScrapedReviewer[1:10]

      
      ScrapedReview <- ScrapeNodes("span.a-size-base.review-text.review-text-content")
      ScrapedReview <- ScrapedReview[1:10]

      
      ScrapedDate <- ScrapeNodes("span.a-size-base.a-color-secondary.review-date")
      ScrapedDate <- ScrapedDate[1:10]

      
      ScrapedRating <- ScrapeNodes("div.a-row")
      ScrapedRating <- ScrapedRating[1:10]

      
      Product2 <- rbind(Product2, data.frame(Category = ScrapedCategory,Name = ScrapedName,
                          Reviewer = ScrapedReviewer,
                          Review = ScrapedReview,
                          Date = ScrapedDate,
                         Ratings = ScrapedRating))

#####
      
Link2 = "https://www.amazon.co.uk/Miss-Lulu-Leather-Stylish-Shoulder/product-reviews/B07DD8GGNX/ref=cm_cr_arp_d_paging_btm_next_2?ie=UTF8&reviewerType=all_reviews&pageNumber=2"

SessionProd2 <- bow(Link2, user_agent = "Educational Purpose")  


      ScrapedReviewer2 <- ScrapeNodes("span.a-profile-name")
      scrapedReviewer2 <- ScrapedReviewer2[1:10]

      
      ScrapedReview2 <- ScrapeNodes("span.a-size-base.review-text.review-text-content")
      ScrapedReview2 <- ScrapedReview2[1:10]

      
      ScrapedDate2 <- ScrapeNodes("span.a-size-base.a-color-secondary.review-date")
      ScrapedDate2 <- ScrapedDate2[1:10]

      
      ScrapedRating2 <- ScrapeNodes("i.a-icon a-icon-star.a-star-5.review-rating")
      ScrapedRating2 <- ScrapedRating2[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory, 
                          Name = ScrapedName,
                          Reviewer = ScrapedReviewer2,
                          Review = ScrapedReview2,
                          Date = ScrapedDate2,
                          Ratings = ScrapedRating2))
      
#####
      
Link3 = "https://www.amazon.co.uk/Miss-Lulu-Leather-Stylish-Shoulder/product-reviews/B07DD8GGNX/ref=cm_cr_arp_d_paging_btm_next_3?ie=UTF8&reviewerType=all_reviews&pageNumber=3"

SessionProd3 <- bow(Link3, user_agent = "Educational Purpose")  

 
      ScrapedReviewer3 <- ScrapeNodes("span.a-profile-name")
      scrapedReviewer3 <- ScrapedReviewer3[1:10]

      
      ScrapedReview3 <- ScrapeNodes("span.a-size-base.review-text.review-text-content")
      ScrapedReview3 <- ScrapedReview3[1:10]

      
      ScrapedDate3 <- ScrapeNodes("")
      ScrapedDate3 <- ScrapedDate3[1:10]

      
      ScrapedRating3 <- ScrapeNodes("")
      ScrapedRating3 <- ScrapedRating3[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory,
                          Name = ScrapedName,
                          Reviewer = scrapedReviewer3,
                          Review = ScrapedReview3,
                          Date = ScrapedDate3,
                          Ratings = ScrapedRating3))
      
#View(Product2)
```

Product 3
```{r}
library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

Product3 = data.frame()
ScrapedCategory <- "Handbags"

#####

Link = "" 

SessionProd1 <- bow(Link, user_agent = "Educational Purpose")
  
ScrapeNodes <- function(selector){
scrape(SessionProd1) %>%
  html_nodes(selector) %>%
  html_text(trim = TRUE)
}
          
      ScrapedName <- ScrapeNodes("")
      
      ScrapedReviewer <- ScrapeNodes("")
      ScrapedReviewer <- ScrapedReviewer[1:10]

      
      ScrapedReview <- ScrapeNodes("")
      ScrapedReview <- ScrapedReview[1:10]

      
      ScrapedDate <- ScrapeNodes("e")
      ScrapedDate <- ScrapedDate[1:10]

      
      ScrapedRating <- ScrapeNodes("")
      ScrapedRating <- ScrapedRating[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory,Name = ScrapedName,
                          Reviewer = ScrapedReviewer,
                          Review = ScrapedReview,
                          Date = ScrapedDate,
                         Ratings = ScrapedRating))

#####
      
Link2 = ""

SessionProd2 <- bow(Link2, user_agent = "Educational Purpose")  


      ScrapedReviewer2 <- ScrapeNodes("")
      scrapedReviewer2 <- ScrapedReviewer2[1:10]

      
      ScrapedReview2 <- ScrapeNodes("")
      ScrapedReview2 <- ScrapedReview2[1:10]

      
      ScrapedDate2 <- ScrapeNodes("")
      ScrapedDate2 <- ScrapedDate2[1:10]

      
      ScrapedRating2 <- ScrapeNodes("")
      ScrapedRating2 <- ScrapedRating2[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory, 
                          Name = ScrapedName,
                          Reviewer = ScrapedReviewer2,
                          Review = ScrapedReview2,
                          Date = ScrapedDate2,
                          Ratings = ScrapedRating2))
      
#####
      
Link3 = ""

SessionProd3 <- bow(Link3, user_agent = "Educational Purpose")  

 
      ScrapedReviewer3 <- ScrapeNodes("")
      scrapedReviewer3 <- ScrapedReviewer3[1:10]

      
      ScrapedReview3 <- ScrapeNodes("")
      ScrapedReview3 <- ScrapedReview3[1:10]

      
      ScrapedDate3 <- ScrapeNodes("")
      ScrapedDate3 <- ScrapedDate3[1:10]

      
      ScrapedRating3 <- ScrapeNodes("")
      ScrapedRating3 <- ScrapedRating3[1:10]

      
      Product1 <- rbind(Product1, data.frame(Category = ScrapedCategory,
                          Name = ScrapedName,
                          Reviewer = scrapedReviewer3,
                          Review = ScrapedReview3,
                          Date = ScrapedDate3,
                          Ratings = ScrapedRating3))


